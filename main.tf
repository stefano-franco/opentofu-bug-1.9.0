# ---------------------------------------------------------------------------------------------------------------------
# ¦ PROVIDER
# ---------------------------------------------------------------------------------------------------------------------
provider "aws" {
  region = "eu-central-1"
}

# ---------------------------------------------------------------------------------------------------------------------
# ¦ VERSIONS
# ---------------------------------------------------------------------------------------------------------------------
terraform {
  required_version = ">= 1.8.9"

  required_providers {
    aws = {
      source                = "hashicorp/aws"
      version               = ">= 4.0"
      configuration_aliases = []
    }
  }
}

# ---------------------------------------------------------------------------------------------------------------------
# ¦ DATA
# ---------------------------------------------------------------------------------------------------------------------
data "aws_iam_roles" "all" {}
data "aws_iam_role" "organization_account_access_role" {
  for_each = {
    for role in data.aws_iam_roles.all.names : role => role
    if role == "OrganizationAccountAccessRole"
  }
  name = each.value
}

# ---------------------------------------------------------------------------------------------------------------------
# ¦ DUMMY MODULE
# ---------------------------------------------------------------------------------------------------------------------
module "dummy_module" {
  source = "./modules/dummy"

  test_string = data.aws_iam_role.organization_account_access_role["OrganizationAccountAccessRole"].arn^
}